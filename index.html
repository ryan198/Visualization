<!DOCTYPE html>
<html>
<head>
    <link rel="stylesheet" href="css/bootstrap.min.css" type="text/css" media="all" />
    <link rel="stylesheet" href="css/styles.css" type="text/css" media="all" />
    <link rel="stylesheet" href="css/font-awesome.min.css" type="text/css" />
    <!--<script src="http://d3js.org/d3.v3.min.js"></script>-->
    <script src="https://d3js.org/d3.v4.min.js"></script>
    <script src="d3.layout.cloud.js"></script>
    <script src="uStates.js"></script>
    <script src="https://use.fontawesome.com/4ff2c12546.js"></script>
</head>
<body>

<div class="container-fluid" id="pageOne">
    <h1 align="center">How you you like your steak?</h1>
    <div id="meatMenu">
        <div class="row">
            <div class="col-md-4">
                <a href="#map" class="steak">
                    <img class="img-responsive" src="img/rare.png" title="Rare" />
                    <h3>Rare</h3>
                </a>
            </div>
            <div class="col-md-4">
                <a href="#map" class="steak">
                    <img class="img-responsive" src="img/medRare.png" title="Medium Rare" />
                    <h3>Medium Rare</h3>
                </a>
            </div>
            <div class="col-md-4">
                <a href="#map" class="steak">
                    <img class="img-responsive" src="img/medium.png" title="Medium" />
                    <h3>Medium</h3>
                </a>
            </div>
        </div>
        <br>
        <div class="row">
            <div class="col-md-4">
                <a href="#map" class="steak">
                    <img class="img-responsive" src="img/medWell.png" title="Medium Well" />
                    <h3>Medium Well</h3>
                </a>
            </div>
            <div class="col-md-4">
                <a href="#map" class="steak">
                    <img class="img-responsive" src="img/wellDone.png" title="Medium Well" />
                    <h3>Well Done</h3>
                </a>
            </div>
            <div class="col-md-4">
                <a href="#map" class="steak">
                    <h2 id="vegan">I don't eat steak</h2>
                </a>
            </div>
        </div>
    </div>

    <h1 class="blink chevron"><i class="fa fa-chevron-down" aria-hidden="true"></i></h1>

</div>


<!--Map Start-->
<div class="container-fluid" id="pageTwo">
    <div id="map" class="vis2">
        <div id="tooltip"></div>
        <svg class="img-responsive" width="940" height="600" id="statesvg"></svg>
        <script>

            function tooltipHtml(n, d){
                return "<h4>"+n+"</h4><table>"+
                    "<tr><td>Rare</td><td>"+(d.low)+"</td></tr>"+
                    "<tr><td>Medium Rare</td><td>"+(d.avg)+"</td></tr>"+
                    "<tr><td>Medium</td><td>"+(d.high)+"</td></tr>"+
                    "<tr><td>Medium Well</td><td>"+(d.high)+"</td></tr>"+
                    "<tr><td>Well Done</td><td>"+(d.high)+"</td></tr>"+
                    "</table>";
            }

            var sampleData ={};
            ["HI", "AK", "FL", "SC", "GA", "AL", "NC", "TN", "RI", "CT", "MA",
                "ME", "NH", "VT", "NY", "NJ", "PA", "DE", "MD", "WV", "KY", "OH",
                "MI", "WY", "MT", "ID", "WA", "DC", "TX", "CA", "AZ", "NV", "UT",
                "CO", "NM", "OR", "ND", "SD", "NE", "IA", "MS", "IN", "IL", "MN",
                "WI", "MO", "AR", "OK", "KS", "LS", "VA"]
                .forEach(function(d){
                    var low=Math.round(100*Math.random()),
                        mid=Math.round(100*Math.random()),
                        high=Math.round(100*Math.random());
                    sampleData[d]={low:d3.min([low,mid,high]), high:d3.max([low,mid,high]),
                        avg:Math.round((low+mid+high)/3), color:d3.interpolate("#ffffcc", "#800026")(low/100)};
                });


            uStates.draw("#statesvg", sampleData, tooltipHtml);

            //d3.select(self.frameElement).style("height", "600px");
        </script>
    </div>
    <a class="button" href="#doughnut">Next Section</a>
    <h1 class="blink chevron"><i class="fa fa-chevron-down" aria-hidden="true"></i></h1>
</div>
<br />
<!--Map End-->
<!--<div class="container-fluid" id="pageThree">-->

    <div id="doughnut" class="vis">
        <script>

            var width = 460,
                height = 320,
                radius = Math.min(width, height) / 2;

            var color = d3.scale.ordinal()
                .range(["#98abc5", "#8a89a6", "#7b6888", "#6b486b", "#a05d56"]);

            var arc = d3.svg.arc()
                .outerRadius(radius - 10)
                .innerRadius(radius - 70);

            var pie = d3.layout.pie()
                .sort(null)
                .value(function(d) { return d.population; });

            var svg = d3.select("#doughnut").append("svg")
                .attr("width", width)
                .attr("height", height)
                .append("g")
                .attr("transform", "translate(" + width / 2 + "," + height / 2 + ")");

            d3.csv("steak.csv", type, function(error, data) {
                if (error) throw error;

                var g = svg.selectAll(".arc")
                    .data(pie(data))
                    .enter().append("g")
                    .attr("class", "arc");

                g.append("path")
                    .attr("d", arc)
                    .style("fill", function(d) { return color(d.data.type); });
                /*g.append("path")
                    .attr("d", arc)
                    .style("fill", function(d) { return color(d.data.type); })
                    .transition().delay(function(d, i) { return i * 500; }).duration(500)
                    .attrTween('d', function(d) {
                        var i = d3.interpolate(d.startAngle+0.1, d.endAngle);
                        return function(t) {
                            d.endAngle = i(t);
                            return arc(d);
                        }*/

                g.append("text")
                    .attr("transform", function(d) { return "translate(" + arc.centroid(d) + ")"; })
                    .attr("dy", ".35em")
                    .text(function(d) { return d.data.type; });
            });

            function type(d) {
                d.population = +d.population;
                return d;
            }

        </script>

    </div>

    <div id="doughnut2" class="vis2">
        <script>

            var width = 460,
                height = 320,
                radius = Math.min(width, height) / 2;

            var color = d3.scale.ordinal()
                .range(["#98abc5", "#8a89a6", "#7b6888", "#6b486b", "#a05d56"]);

            var arc = d3.svg.arc()
                .outerRadius(radius - 10)
                .innerRadius(radius - 70);

            var pie = d3.layout.pie()
                .sort(null)
                .value(function(d) { return d.countAge; });

            var svg = d3.select("#doughnut2").append("svg")
                .attr("width", width)
                .attr("height", height)
                .append("g")
                .attr("transform", "translate(" + width / 2 + "," + height / 2 + ")");

            d3.csv("steak.csv", type, function(error, data) {
                if (error) throw error;

                var g = svg.selectAll(".arc")
                    .data(pie(data))
                    .enter().append("g")
                    .attr("class", "arc");

                g.append("path")
                    .attr("d", arc)
                    .style("fill", function(d) { return color(d.data.ageRange); });
                /*g.append("path")
                 .attr("d", arc)
                 .style("fill", function(d) { return color(d.data.type); })
                 .transition().delay(function(d, i) { return i * 500; }).duration(500)
                 .attrTween('d', function(d) {
                 var i = d3.interpolate(d.startAngle+0.1, d.endAngle);
                 return function(t) {
                 d.endAngle = i(t);
                 return arc(d);
                 }*/

                g.append("text")
                    .attr("transform", function(d) { return "translate(" + arc.centroid(d) + ")"; })
                    .attr("dy", ".35em")
                    .text(function(d) { return d.data.ageRange; });
            });

            function type(d) {
                d.countAge = +d.countAge;
                return d;
            }

        </script>

    </div>

    <div class="vis" id="cloud">

        <script type="text/javascript">


            var fill = d3.scale.category20();

            var steakData = [],
                    width = 450,
                    height = 600;

            d3.csv("steak.csv", function(data) {
                data.forEach( function (d) {
                    steakData.push(d.doneness);
                });

                d3.layout.cloud().size([450, 600])
                        .words(steakData.map(function(d) {
                            return {text: d, size: 10 + Math.random() * 90};
                        }))
                        .rotate(function() { return ~~(Math.random() * 2) * 90; })
                        .font("Impact")
                        .fontSize(function(d) { return d.size; })
                        .on("end", draw)
                        .start();

            });

            function draw(words) {
                d3.select("#cloud").append("svg")
                        .attr("width", 450)
                        .attr("height", 600)
                        .append("g")
                        .attr("transform", "translate(150,150)")
                        .selectAll("text")
                        .data(words)
                        .enter().append("text")
                        .style("font-size", function(d) { return d.size + "px"; })
                        .style("font-family", "Impact")
                        .style("fill", function(d, i) { return fill(i); })
                        .attr("text-anchor", "middle")
                        .attr("transform", function(d) {
                            return "translate(" + [d.x, d.y] + ")rotate(" + d.rotate + ")";
                        })
                        .text(function(d) { return d.text; });
            }
        </script>

    </div>

<!--</div>-->
<div id="circle">

    <svg width="960" height="960" id="circlesvg"></svg>
    <script>

        var svg = d3.select("#circlesvg"),
            margin = 20,
            diameter = +svg.attr("width"),
            g = svg.append("g").attr("transform", "translate(" + diameter / 2 + "," + diameter / 2 + ")");

        var color = d3.scaleLinear()
            .domain([-1, 5])
            .range(["hsl(152,80%,80%)", "hsl(228,30%,40%)"])
            .interpolate(d3.interpolateHcl);

        var pack = d3.pack()
            .size([diameter - margin, diameter - margin])
            .padding(2);

        d3.json("flare.json", function(error, root) {
            if (error) throw error;

            root = d3.hierarchy(root)
                .sum(function(d) { return d.size; })
                .sort(function(a, b) { return b.value - a.value; });

            var focus = root,
                nodes = pack(root).descendants(),
                view;

            var circle = g.selectAll("circle")
                .data(nodes)
                .enter().append("circle")
                .attr("class", function(d) { return d.parent ? d.children ? "node" : "node node--leaf" : "node node--root"; })
                .style("fill", function(d) { return d.children ? color(d.depth) : null; })
                .on("click", function(d) { if (focus !== d) zoom(d), d3.event.stopPropagation(); });

            var text = g.selectAll("text")
                .data(nodes)
                .enter().append("text")
                .attr("class", "label")
                .style("fill-opacity", function(d) { return d.parent === root ? 1 : 0; })
                .style("display", function(d) { return d.parent === root ? "inline" : "none"; })
                .text(function(d) { return d.data.name; });

            var node = g.selectAll("circle,text");

            svg
                .style("background", color(-1))
                .on("click", function() { zoom(root); });

            zoomTo([root.x, root.y, root.r * 2 + margin]);

            function zoom(d) {
                var focus0 = focus; focus = d;

                var transition = d3.transition()
                    .duration(d3.event.altKey ? 7500 : 750)
                    .tween("zoom", function(d) {
                        var i = d3.interpolateZoom(view, [focus.x, focus.y, focus.r * 2 + margin]);
                        return function(t) { zoomTo(i(t)); };
                    });

                transition.selectAll("text")
                    .filter(function(d) { return d.parent === focus || this.style.display === "inline"; })
                    .style("fill-opacity", function(d) { return d.parent === focus ? 1 : 0; })
                    .on("start", function(d) { if (d.parent === focus) this.style.display = "inline"; })
                    .on("end", function(d) { if (d.parent !== focus) this.style.display = "none"; });
            }

            function zoomTo(v) {
                var k = diameter / v[2]; view = v;
                node.attr("transform", function(d) { return "translate(" + (d.x - v[0]) * k + "," + (d.y - v[1]) * k + ")"; });
                circle.attr("r", function(d) { return d.r * k; });
            }
        });

    </script>

</div>

</body>
</html>